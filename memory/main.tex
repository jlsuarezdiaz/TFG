% !TEX options=--shell-escape

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Trabajo de Fin de Grado
%
% Autores: Juan Luis Suárez Díaz (https://github.com/jlsuarezdiaz)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%-----------------------------------------------------------------------------------------------------
%	INCLUSIÓN DE PAQUETES BÁSICOS
%-----------------------------------------------------------------------------------------------------

\documentclass[openany]{book}

% Utiliza el paquete de español.
\usepackage{spanish}

% Utiliza la plantilla para reports.
% \usepackage{template}

%---------------------------------------------------------------------------------------------------
%	OTROS PAQUETES
%-----------------------------------------------------------------------------------------------------

\usepackage{mathematics}
\usepackage{comment}

\usepackage{modern-thesis}
\usepackage{title-ugr}

% Change the space before and anfer chapter titles.
% https://tex.stackexchange.com/questions/111643/decrease-space-before-and-after-chapter-in-fncychap
\makeatletter
\patchcmd{\@makechapterhead}{\vspace*{50\p@}}{\vspace*{-30\p@}}{}{}
\patchcmd{\@makeschapterhead}{\vspace*{50\p@}}{\vspace*{-30\p@}}{}{}
\patchcmd{\DOTI}{\vskip 80\p@}{\vskip 40\p@}{}{}
\patchcmd{\DOTIS}{\vskip 40\p@}{\vskip 0\p@}{}{}
\makeatother

%-----------------------------------------------------------------------------------------------------
%	LICENCIA
%-----------------------------------------------------------------------------------------------------

\usepackage[
    type={CC},
    modifier={by},
    version={4.0}, 
]{doclicense}

%-----------------------------------------------------------------------------------------------------
% DEFINICIÓN DE COMANDOS 
%-----------------------------------------------------------------------------------------------------

\newcommand{\istargetof}{\rightsquigarrow}

%-----------------------------------------------------------------------------------------------------
%	PORTADA
%-----------------------------------------------------------------------------------------------------

% Elija uno de los siguientes formatos.
% No olvide incluir los archivos .sty asociados en el directorio del documento.
%\usepackage{title1}
%\usepackage{title2}
%\usepackage{title3}

%-----------------------------------------------
% BIBLIOGRAPHY
%-----------------------------------------------

\usepackage[
backend=biber
]{biblatex}

\addbibresource{bibliography.bib}

%-----------------------------------------------------------------------------------------------------
%	DATOS DEL DOCUMENTO
%-----------------------------------------------------------------------------------------------------

\newcommand{\doctitle}{El aprendizaje de métricas de distancia}
\newcommand{\docsubtitle}{Análisis y revisión de técnicas desarrolladas en alta dimensionalidad}
\newcommand{\docdate}{\date}
\newcommand{\subject}{Trabajo de Fin de Grado}
\newcommand{\degree}{Doble Grado en Ingeniería Informática y Matemáticas}
\newcommand{\docauthor}{Juan Luis Suárez Díaz}
\newcommand{\tutors}{Francisco Herrera Triguero \\ Salvador García López}
\newcommand{\myTutor}{Francisco Herrera Triguero}
\newcommand{\myOtherTutor}{Salvador García López}
\newcommand{\docaddress}{Facultad de Ciencias \\ E.T.S.  Ingenierías Informática y de Telecomunicación}
\newcommand{\docemail}{jlsuarezdiaz@correo.ugr.es}
\newcommand{\doclhead}{J. L. Suárez}
\newcommand{\docrhead}{}

%-----------------------------------------------------------------------------------------------------
%	RESUMEN
%-----------------------------------------------------------------------------------------------------

% Resumen del documento. Va en la portada.
% Puedes también dejarlo vacío, en cuyo caso no aparece en la portada.
\newcommand{\docabstract}{}
%\newcommand{\docabstract}{En este texto puedes incluir un resumen del documento. Este informa al lector sobre el contenido del texto, indicando el objetivo del mismo y qué se puede aprender de él.}

\usepackage{tocloft}
\setlength{\cftchapnumwidth}{1.5em}
   
\begin{document}

\selectlanguage{spanish}

\frontmatter

\hypersetup{pageanchor=false}
\maketitle
\hypersetup{pageanchor=true}

%\pagestyle{plain}
%\setcounter{chapter}{-3}
\renewcommand{\chaptername}{}

\refstepcounter{dummy}
\pdfbookmark[1]{Resumen}{Resumen}
\input{chapters/resumen}
\newpage

\refstepcounter{dummy}
\pdfbookmark[1]{Abstract}{Abstract}
\renewcommand{\chaptername}{Abstract}
\input{chapters/abstract}
\newpage


\refstepcounter{dummy}
\pdfbookmark[1]{Declaraciones}{Declaraciones}
\renewcommand{\chaptername}{}
\thispagestyle{empty}
\input{chapters/declaration_library}
\newpage

\refstepcounter{dummy}
%\pdfbookmark[1]{Abstract}{Abstract}
\renewcommand{\chaptername}{}
\thispagestyle{empty}
\input{chapters/declaration_tutor}
\newpage

\refstepcounter{dummy}
\pdfbookmark[1]{Agradecimientos}{Agradecimientos}
\renewcommand{\chaptername}{Agradecimientos}
\input{chapters/acknowledgements}
\newpage

\renewcommand{\chaptername}{}

%-----------------------------------------------------------------------------------------------------
%	ÍNDICE
%-----------------------------------------------------------------------------------------------------

% Profundidad del Índice:
\refstepcounter{dummy}
\pdfbookmark[1]{\contentsname}{tableofcontents}
\setcounter{tocdepth}{1} % <-- 2 includes up to subsections in the ToC
\setcounter{secnumdepth}{3} % <-- 3 numbers up to subsubsections

\thispagestyle{plain}
\begingroup\hypersetup{linkcolor=black}\tableofcontents\endgroup
%\tableofcontents
\vspace*{\fill}
%\doclicenseThis
%\newpage


\mainmatter
\renewcommand{\chaptername}{Capítulo}

%\pagestyle{plain}

\part{Introducción}


%% INTRODUCCIÓN
\input{chapters/introduction}


\part{Matemáticas}

%% CAPÍTULO 1 - ANÁLISIS CONVEXO
\input{chapters/convex_analysis}


%% CAPÍTULO 2 - MATRICES
\input{chapters/matrices}


%% CAPÍTULO 3 - TEORÍA DE LA INFORMACIÓN
\input{chapters/information_theory}

\part{Informática teórica}

%% CAPÍTULO 4 - EL APRENDIZAJE AUTOMÁTICO
\input{chapters/machine_learning}

%% CAPÍTULO 5 - EL APRENDIZAJE DE MÉTRICAS DE DISTANCIA
\input{chapters/dml_theory}

%% CAPÍTULO 6 - DESCRIPCIÓN DE TÉCNICAS DE APRENDIZAJE DE MÉTRICAS DE DISTANCIA
\input{chapters/dml_algorithms} 

\part{Informática práctica}

%% CAPÍTULO 7 - SOFTWARE DESARROLLADO
\input{chapters/software}

%% CAPÍTULO 8 - EXPERIMENTACIÓN
\input{chapters/experiments}

\part{Conclusión}

\input{chapters/conclussion}
 
%-----------------------------------------------------------------------------------------------------
%	BIBLIOGRAFÍA
%-----------------------------------------------------------------------------------------------------


%\refstepcounter{dummy}
%\addtocontents{toc}{\protect\vspace{\beforebibskip}} % to have the bib a bit from the rest in the toc
%\addcontentsline{toc}{chapter}{\tocEntry{\bibname}}

\renewcommand{\chaptername}{}
\printbibliography[heading=bibintoc]
\nocite{*}

\end{document}

